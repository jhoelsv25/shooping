import{a as Z}from"./chunk-JU76MDVY.js";import{A as C,C as f,D as M,E as I,F as V,G as j,H as z,I as B,L as $,M as q,R as D,U as G,Y as O,a as h,b as g,c as w,d,e as y,f as S,g as v,h as x,i as p,k as P,m,n as l,o as b,q as F,r as k,t as T,u as E,v as c,w as s,x as u,y as L,z as _}from"./chunk-NXGBF7XC.js";var A=(()=>{let t=class t{constructor(){this.favorite=m([])}addProductFavorite(e){this.favorite.update(r=>r.find(a=>a.id===e.id)?r.map(a=>a.id===e.id?g(h({},a),{isFavorite:!0}):a):[...r,g(h({},e),{isFavorite:!0})]),console.log(this.favorite())}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var R=(i,t)=>t.id;function U(i,t){i&1&&(p(),c(0,"svg",3),u(1,"path",13),s())}function H(i,t){i&1&&(p(),c(0,"svg",3),u(1,"path",14),s())}var W=i=>["/product",i];function J(i,t){if(i&1){let n=L();c(0,"div",1)(1,"button",2),_("dblclick",function(){let o=v(n).$implicit,a=C();return x(a.addFavorite(o))}),F(2,U,2,0,":svg:svg",3)(3,H,2,0),s(),c(4,"a",4)(5,"picture",5),u(6,"img",6),s(),c(7,"footer",7)(8,"h4",8),f(9),s(),c(10,"h3",9),f(11),z(12,"currency"),s(),c(13,"button",10),_("click",function(){let o=v(n).$implicit,a=C();return x(a.addTocart(o))}),p(),c(14,"svg",11),u(15,"path",12),s()()()()()}if(i&2){let n=t.$implicit;l(2),k(2,n.isFavorite?2:3),l(3),b("routerLink",j(9,W,n.id)),l(1),b("src",n.images&&n.images.length!=0?n.images[0]:"../../../../assets/image_default.webp",P)("alt",n.title),l(3),M(n.title),l(2),I(" ",B(12,6,n.price,"USD")," ")}}function K(i,t){i&1&&(c(0,"div",15)(1,"h3",16),f(2,"No hay productos"),s()())}var de=(()=>{let t=class t{constructor(){this.productService=d(Z),this.cartService=d(O),this.favoriteService=d(A),this.products=m([]),this.route=d(D)}ngOnInit(){this.allProducts(),this.filterCategory(),this.searchProducts()}addTocart(e){this.cartService.addToCart(e)}toggleFavorite(e){}ngOnChanges(e){e.price&&this.filterByPrice()}allProducts(){this.productService.getProducts().subscribe({next:e=>{this.products.set(e)},error:e=>{console.log(e)}})}filterCategory(){this.route.queryParams.subscribe(e=>{let r=e.category_id;r?this.productService.getFilterProducts({categoryId:r}).subscribe({next:o=>{this.products.set(o)},error:o=>{console.log(o)}}):this.allProducts()})}searchProducts(){this.route.queryParams.subscribe(e=>{let r=e.q;r?this.productService.getFilterProducts({title:r}).subscribe({next:o=>{this.products.set(o)},error:o=>{console.log(o)}}):this.allProducts()})}filterByPrice(){let e=this.price,r=this.price+100;e?this.productService.getFilterProducts({price_min:e,price_max:r}).subscribe({next:o=>{this.products.set(o),console.log(o)},error:o=>{console.log(o)}}):this.allProducts()}addFavorite(e){this.favoriteService.addProductFavorite(e)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=y({type:t,selectors:[["card-product"]],inputs:{products:"products",price:"price"},standalone:!0,features:[S,V],decls:4,vars:1,consts:[[1,"grid","grid-cols-5","gap-3","max-lg:grid-cols-3","max-md:grid-cols-2","max-sm:grid-cols-1"],[1,"relative","group","max-w-xs"],[1,"absolute","top-5","right-10","translate-y-4","transition-all","duration-500","rounded-full","text-black","text-xl","p-3","bg-green-500","hover:bg-green-400","opacity-0","group-hover:translate-y-0","group-hover:opacity-100",3,"dblclick"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","viewBox","0 0 256 256"],[1,"transition-all","duration-300","flex","flex-col","bg-zinc-500/30","p-2","w-52","overflow-hidden","gap-2","pb-3","shadow-lg","hover:shadow-xl","rounded-md","hover:bg-zinc-800"],[1,"rounded-lg","p-2","h-40",3,"routerLink"],[1,"h-full","w-full","object-cover","rounded-md",3,"src","alt"],[1,"px-2"],[1,"text-sm","truncate"],[1,"font-semibold","py-2","text-sm"],[1,"w-full","bg-green-500","hover:bg-green-600","rounded-md","py-2","font-bold","cursor-pointer","text-black","flex","justify-center","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"],["fill","currentColor","d","M240 98a57.63 57.63 0 0 1-17 41l-89.3 90.62a8 8 0 0 1-11.4 0L33 139a58 58 0 0 1 82-82.1l13 12.15l13.09-12.19A58 58 0 0 1 240 98Z"],["fill","currentColor","d","M221.6 58.38a56.06 56.06 0 0 0-79.12-.08L128 71.78L113.52 58.3a56 56 0 0 0-79.15 79.25l89.36 90.66a6 6 0 0 0 8.54 0l89.33-90.62a56 56 0 0 0 0-79.21Zm-8.52 70.75L128 215.45L42.89 129.1a44 44 0 0 1 62.22-62.23a1.07 1.07 0 0 0 .16.14l18.64 17.36a6 6 0 0 0 8.18 0L150.73 67a1.07 1.07 0 0 0 .16-.14a44 44 0 1 1 62.19 62.26Z"],[1,"flex","justify-center","items-center","col-span-5"],[1,"text-2xl","font-bold"],["class","relative group max-w-xs"]],template:function(r,o){r&1&&(c(0,"section",0),T(1,J,16,11,"div",17,R,!1,K,3,0),s()),r&2&&E(1,o.products())},dependencies:[q,$,G]});let i=t;return i})();export{A as a,de as b};
