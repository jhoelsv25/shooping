<section class="grid grid-cols-5 gap-3">
  @for (product of products(); track product.id ){
  <div class="relative group max-w-xs">
    <button
      (dblclick)="toggleFavorite(product)"
      class="absolute top-5 right-10 translate-y-4 transition-all duration-500 rounded-full text-black text-xl p-3 bg-green-500 hover:bg-green-400 opacity-0 group-hover:translate-y-0 group-hover:opacity-100"
    >
      @if(isFavorite()){

      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="1em"
        height="1em"
        viewBox="0 0 256 256"
      >
        <path
          fill="currentColor"
          d="M240 98a57.63 57.63 0 0 1-17 41l-89.3 90.62a8 8 0 0 1-11.4 0L33 139a58 58 0 0 1 82-82.1l13 12.15l13.09-12.19A58 58 0 0 1 240 98Z"
        />
      </svg>
      }@else {
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="1em"
        height="1em"
        viewBox="0 0 256 256"
      >
        <path
          fill="currentColor"
          d="M221.6 58.38a56.06 56.06 0 0 0-79.12-.08L128 71.78L113.52 58.3a56 56 0 0 0-79.15 79.25l89.36 90.66a6 6 0 0 0 8.54 0l89.33-90.62a56 56 0 0 0 0-79.21Zm-8.52 70.75L128 215.45L42.89 129.1a44 44 0 0 1 62.22-62.23a1.07 1.07 0 0 0 .16.14l18.64 17.36a6 6 0 0 0 8.18 0L150.73 67a1.07 1.07 0 0 0 .16-.14a44 44 0 1 1 62.19 62.26Z"
        />
      </svg>
      }
    </button>
    <a
      [routerLink]="['/product', product.id]"
      class="transition-all duration-300 flex flex-col bg-zinc-500/30 p-2 w-52 overflow-hidden gap-2 pb-3 shadow-lg hover:shadow-xl rounded-md hover:bg-zinc-800"
    >
      <picture class="rounded-lg p-2 h-40">
        <img
          [src]="
            product.images && product.images.length != 0
              ? product.images[0]
              : '../../../../assets/image_default.webp'
          "
          [alt]="product.title"
          class="h-full w-full object-cover rounded-md"
        />
      </picture>
      <footer class="px-2">
        <h4 class="text-sm truncate">{{ product.title }}</h4>
        <h3 class="font-semibold py-2 text-sm">
          {{ product.price | currency : "USD" }}
        </h3>
        <button
          (click)="addTocart(product)"
          class="w-full bg-green-500 hover:bg-green-600 rounded-md py-2 font-bold cursor-pointer text-black flex justify-center items-center"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"
            />
          </svg>
        </button>
      </footer>
    </a>
  </div>
  }@empty {
  <div class="flex justify-center items-center col-span-5">
    <h3 class="text-2xl font-bold">No hay productos</h3>
  </div>
  }
</section>
